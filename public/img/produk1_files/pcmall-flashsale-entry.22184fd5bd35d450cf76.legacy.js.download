(self.mfeModules=self.mfeModules||[]).push(["pcmall-flashsale-entry",["React","PlatformApi","WithInjectReducer","ReactRedux","Redux","ReactRouter","ReactHelmet","Platform","FeatureToggles","ReactDom"],function(e,t,n,r,o,a,s,i,l,c){return(self["mfeStartuppcmall-flashsale"]||function(){})(190),["pcmall-flashsale",(self.wpJsonpPcmallFlashsale=self.wpJsonpPcmallFlashsale||[]).push([[190],{5052:function(e,t,n){"use strict";n.d(t,{Z:function(){return G}});var r=n(2909),o=n(3804),a=n.n(o),s=n(5325),i=n(1805),l=n(6320),c=n(4218),u=n.n(c),m=n(4251),h=n(980),d=n(9924),p=n(9207),f=n(8090),v=n(5042),g=["headerText","headerButton","children","simpleVersion","classNames","customButtonContent","hasNoNavigation","onHeaderButtonClick","style","trackingRef","headerStyle","customHeader"],_=["seeAllColor"];function E(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}function y(){return y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}var w=function(e){var t=e.headerButton,n=e.onHeaderButtonClick,r=e.simpleVersion,o=e.hasNoNavigation,s=e.customButtonContent,i=e.headerButtonStyle,l=e.headerSectionButtonProps,c=t.linkTo,u=s||a().createElement(a().Fragment,null,t.text,"Â ",a().createElement(d.Z,null)),m=r?a().createElement(p.Rd,y({targetType:"SeeAllButton",style:i},l),u):a().createElement(p.s7,y({targetType:"SeeAllButton",style:i},l),u);return o?a().createElement("div",{className:"shopee-header-section__header-link",onClick:function(e){n&&n(e)}},m):a().createElement(h.Z,{to:c,className:"shopee-header-section__header-link",onClick:function(e){n&&n(e)},tabIndex:-1},m)},S=(0,m.Z)((function(e){var t=e.headerText,n=e.headerButton,r=e.children,o=e.simpleVersion,s=e.classNames,i=e.customButtonContent,l=e.hasNoNavigation,c=e.onHeaderButtonClick,m=e.style,h=void 0===m?{}:m,d=e.trackingRef,p=e.headerStyle,S=void 0===p?{}:p,C=e.customHeader,P=E(e,g),x={backgroundImage:C&&C.background_image?"url("+(0,v.Jn)(C.background_image)+")":void 0},R=(S.seeAllColor,E(S,_));return a().createElement("div",{className:u()("shopee-header-section",s,!!o&&"shopee-header-section--simple"),ref:d||null,style:h},a().createElement("div",{className:"shopee-header-section__header",style:x},a().createElement("div",{className:"shopee-header-section__header__title",style:R},a().createElement(f.Z,{headerText:t,customHeader:C})),!!n&&a().createElement(w,{headerButton:n,simpleVersion:!!o,hasNoNavigation:!!l,customButtonContent:i,onHeaderButtonClick:c,headerButtonStyle:S&&S.seeAllColor?{color:S.seeAllColor}:S&&S.color?{color:S.color}:{},headerSectionButtonProps:y({},P)})),a().createElement("div",{className:"shopee-header-section__content"},r))}),"HeaderSection",{reportOnce:!0}),C=n(9370),P=n(6704),x=n(2451),R=n(6076),k=n(3974),F=n(6748),H=n(9441),O=n(1292),N=n(1786),B=n(7422),T=n(1801),I=n(6626),b=n.n(I),A=n(3532),Z=n(8425);function j(){return j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j.apply(this,arguments)}function V(e,t,n,r,o,a,s){try{var i=e[a](s),l=i.value}catch(c){return void n(c)}i.done?t(l):Promise.resolve(l).then(r,o)}function D(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){V(a,r,o,s,i,"next",e)}function i(e){V(a,r,o,s,i,"throw",e)}s(void 0)}))}}function z(e,t){return z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},z(e,t)}P.Tracking.injectTracking(b());for(var L=[],M=0;M<5;M++)L.push(o.createElement("div",{className:"shopee-product-recommend-items__item-wrapper"},o.createElement(R.Z,{isPlaceholder:!0,layout:k.HS.HOME_PAGE})));var K=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).state={isFetching:!1},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,z(t,n);var a=r.prototype;return a.UNSAFE_componentWillMount=function(){var e=this;this.setState({isFetching:!0}),D(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.universalDataFetch();case 2:case"end":return t.stop()}}),t)})))()},a.universalDataFetch=function(){var e=this.props.shouldPersonalized;return this.fetchFlashSaleContent(e)},a.UNSAFE_componentWillReceiveProps=function(e){var t=this,n=this.props.shouldPersonalized;e.shouldPersonalized!==n&&D(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.fetchFlashSaleContent(e.shouldPersonalized);case 2:case"end":return n.stop()}}),n)})))()},a.fetchFlashSaleContent=function(){var e=D(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.fetchFlashSaleItems({shouldPersonalized:t,filterSoldout:!0},0,l.zN,(function(e){return n.setState({isFetching:e})}),(function(){return n.setState({isFetching:!1})}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.render=function(){var e=this.props,t=e.meta,n=e.isShowSeeAll,r=void 0===n||n,a=e.itemInfo,s=e.trackingClick,i=e.customHeader,l=e.numItemsPerRow,c=e.layoutInfo,u=a&&a.items,m=t?t.end_time:-1,h=t?t.start_time:-1,d=t?t.promotionid:null;return this.state.isFetching||u&&!(u.length<6)?this.state.isFetching?o.createElement("div",{className:"shopee-flash-sale-overview-carousel"}):o.createElement("div",{className:"shopee-flash-sale-overview-carousel"},o.createElement(T.ZP,{targetType:"HomePage.FlashSaleOverviewCarousel",targetData:j({},c)},o.createElement(S,{headerText:o.createElement(x.Z,{startTime:h,endTime:m}),simpleVersion:!0,onHeaderButtonClick:s,headerButton:r&&d?{text:P.I18n.t("label_see_all"),linkTo:(0,F.V)({promotionId:d})}:null,customHeader:i},o.createElement(C.ZP,{showArrowOnHover:!0,showArrowHint:!0,numItemsPerRow:l,padding:"0px",items:u&&u.length>=6&&!this.state.isFetching?u.map((function(e,t){return o.createElement("div",{className:"shopee-product-recommend-items__item-wrapper",key:"flash-sale-overview-item-"+t},e?o.createElement(R.Z,{item:e,index:t,isOngoing:!0,layout:k.HS.HOME_PAGE,overwriteCardLink:(0,F.V)({promotionId:null===d?void 0:d,fromItem:e.itemid}),displayFlashSaleProgressBar:!0,setShowDiscountBadge:!0}):o.createElement("div",null))})):L})))):null},r}(o.Component);K.QUERY={filterSoldout:!0};var U=(0,s.connect)((function(e,t){var n,r,o=e.featureToggles.toggles[B.Xgy];return{shouldPersonalized:void 0!==o&&o,meta:(0,i.fg)(e),itemInfo:(0,i.Kj)(e),numItemsPerRow:(r=null===(n=t.layoutInfo)||void 0===n?void 0:n.layoutType,r===Z.V2.Tiny?4:r===Z.V2.Portrait?5:6)}}),{fetchFlashSaleItems:i.HU})(P.I18n.withI18nCollections([A.L,A.GC])((0,m.Z)((function(e){return o.createElement(H.Z.Consumer,null,(function(t){var n=t.customHeader;return o.createElement(K,j({customHeader:(0,N.Z)(n,[O.u.FLASH_SALE])||null},e))}))}),"FlashSaleOverviewCarousel"))),G=(0,r.Z)(U)},6161:function(e){"use strict";e.exports=i},6704:function(e){"use strict";e.exports=t},3804:function(t){"use strict";t.exports=e},7274:function(e){"use strict";e.exports=c},5325:function(e){"use strict";e.exports=r},6775:function(e){"use strict";e.exports=a},4857:function(e){"use strict";e.exports=o},7762:function(e){"use strict";e.exports=n}},0,[[5052,666,297,388,730,419,733]]]),"Z",null]},1]),function(){if(window&&window.__DECKER_HOOK__){var e=window.__DECKER_HOOK__;function t(){e.sendToDevtools("MFE_LOAD_SLOT",{slotName:"pcmall-flashsale-entry",tag:"pc-v5.8.0",branch:"heads/pc-v5.8.0",lastCommit:"chore(release): pc-v5.8.0",lastCommitHash:"b5e71fcabc3665f1ec35c207714416052b7c7b33",updated:"2022-05-26T03:51:20.030Z"})}e.on("MFE_RETRIEVE_SLOTS",t),t()}}();